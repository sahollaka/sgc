<!DOCTYPE html>
<html>
<head>
  <title>Game Center Timers</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #111111;
      color: #eee;
      padding: 20px;
    }
    .main-title {
      text-align: center;
      font-size: 48px;
      font-weight: bold;
      color: #c63636;
      text-shadow: 0 0 10px #000000, 0 0 20px #250000;
      margin-bottom: 10px;
    }
    .global-btn {
      border: none;
      border-radius: 8px;
      padding: 8px 18px;
      color: white;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
      transition: background 0.3s ease;
    }
    .global-btn:hover {
      opacity: 0.85;
    }
    #players, #special-players {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 15px;
    }
    .player {
      background: #032648;
      border-radius: 12px;
      padding: 15px;
      border: 6px solid rgb(8, 81, 146);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .player:hover {
        transform: translateY(-5px);
    }
    .player.started {
      border-color: rgb(6, 96, 6);
      background-color: #002005;
    }
    .player.paused {
      border-color: rgb(99, 8, 8);
      background-color: rgb(44, 2, 2);
    }
    .player.has-food {
      border-color: #ffd700;
    }
    .player.selected {
        box-shadow: 0 0 20px 7px #3498db;
        transform: scale(1.05);
    }
    .player h4 {
      margin-top: 0;
      margin-bottom: 4px;
      font-size: 1.8em;
      color: #408df7;
    }
    .player.started h4 { color: #0fa514; }
    .player.paused h4 { color: #a72929; }
    .time {
      font-size: 24px;
      margin: 8px 0;
    }
    .cost {
      font-size: 20px;
      color: #ffd700;
      margin-bottom: 10px;
      padding: 5px;
      border-radius: 5px;
    }
    button {
      border: none;
      border-radius: 8px;
      padding: 8px 18px;
      font-size: 14px;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      margin: 4px;
      transition: background 0.2s ease;
    }
    .start-btn { background-color: #4CAF50; }
    .pause-btn { background-color: #ff4c4c; }
    .resume-btn { background-color: #4CAF50; }
    .reset-btn { background-color: #ff6600; }
    
    .start-btn, .pause-btn, .resume-btn, .reset-btn {
        cursor: pointer;
        z-index: 10;
        position: relative;
    }
    table {
      width: 300px;
      margin: 20px auto;
      border-collapse: collapse;
      color: #eee;
    }
    table, th, td {
      border: 1px solid #555;
    }
    th, td {
      padding: 8px 12px;
      text-align: center;
    }
    th {
      background-color: #444;
    }
    #players input.name-input, #special-players input.name-input {
      width: 90%;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #888;
      font-size: 1em;
      background: #222;
      color: #eee;
      margin-top: 0;
      margin-bottom: 12px;
    }
    #manage-food-section {
        margin-top: 15px;
        background: #2c3e50;
        padding: 15px;
        border-radius: 8px;
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
        display: none;
    }
    #manage-food-list div {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
        background: #34495e;
        padding: 5px 10px;
        border-radius: 5px;
    }
  </style>
</head>
<body>

  <h2 class="main-title">ğŸ® Sahollaka Game Center</h2>

  <div style="margin-bottom: 30px; text-align:center;">
    <h3 style="color:#ffd700;">ğŸ›’ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø®ÙˆØ§Ø±Ø¯Ù† Ùˆ Ø®ÙˆØ§Ø±Ø¯Ù†Û•ÙˆÛ•</h3>
    <h4 style="color: #3498db;">PCÙ€ÛŒ Ù‡Û•ÚµØ¨Ú˜ÛØ±Ø¯Ø±Ø§Ùˆ: <span id="selected-pc-display">Ù‡ÛŒÚ†</span></h4>
    <button onclick="showFoodList()" style="background:#0088cc;" class="global-btn">ğŸ” Ø®ÙˆØ§Ø±Ø¯Ù†Û•Ú©Ø§Ù†</button>
    <br><br>
    
    <div id="quick-food-buttons"></div>
    <br>
    <button onclick="toggleManageFood()" style="background:#8e44ad;" class="global-btn">âš™ï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ø¯ÙˆÚ¯Ù…Û• Ø®ÛØ±Ø§Ú©Ø§Ù†</button>
    
    <div id="manage-food-section">
        <h4>Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù† / Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø¯ÙˆÚ¯Ù…Û•</h4>
        <input type="text" id="newFoodName" placeholder="Ù†Ø§ÙˆÛŒ Ø®ÙˆØ§Ø±Ø¯Ù† (Ø¦Ø§Ø±Û•Ø²ÙˆÙˆÙ…Û•Ù†Ø¯Ø§Ù†Û•)" style="padding:6px 10px; border-radius:8px;" />
        <input type="number" id="newFoodPrice" placeholder="Ù†Ø±Ø®ÛŒ Ø¯ÛŒÙ†Ø§Ø±" style="padding:6px 10px; border-radius:8px; width:100px;" />
        <button onclick="addQuickFoodButton()" style="background:#27ae60;" class="global-btn">â• Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•</button>
        <hr style="border-color: #7f8c8d; margin: 15px 0;">
        <div id="manage-food-list"></div>
    </div>
  </div>


  <!-- Global Controls -->
  <div style="text-align:center; margin-bottom: 30px;">
    <button onclick="pauseAll()" style="background:#ff4c4c;" class="global-btn">â¸ï¸ Pause All</button>
    <button onclick="startAll()" style="background:#4CAF50;" class="global-btn">â–¶ï¸ Start All</button>
    <button onclick="resetAll()" style="background:#ff6600;" class="global-btn">ğŸ”„ Reset All</button>
    <button onclick="showSpecialTimers()" style="background:#9b59b6;" class="global-btn">10 pc</button>
  </div>

  <table>
    <thead>
      <tr>
        <th style="color: #4CAF50;">(Started)</th>
        <th style="color: #ff4c4c;">(Not Started)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="countStarted">0</td>
        <td id="countNotStarted">0</td>
      </tr>
    </tbody>
  </table>

  <div id="players"></div>

  <!-- Special Timers Section -->
  <div id="special-timers-section" style="display:none;">
    <hr style="margin: 30px auto; border-color: #555; width: 80%;">
    <h2 class="main-title" style="font-size: 32px; color: #9b59b6;">ğŸ” Private Timers</h2>
    <div id="special-players"></div>
  </div>

  <script>
    let numPlayers = 40; 
    const playersDiv = document.getElementById('players');
    const pricePerHour = 3000;
    let intervals = {};
    let specialTimersLoaded = false;
    let selectedPC = null;

    function format(ms) {
      const totalSeconds = Math.floor(ms / 1000);
      const h = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
      const m = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const s = String(totalSeconds % 60).padStart(2, '0');
      return `${h}:${m}:${s}`;
    }
    
    function selectPC(pcNum) {
        if (selectedPC) {
            const oldSelection = document.getElementById(`playerBox${selectedPC}`);
            if (oldSelection) oldSelection.classList.remove('selected');
        }
        
        selectedPC = pcNum;
        const newSelection = document.getElementById(`playerBox${pcNum}`);
        newSelection.classList.add('selected');

        document.getElementById('selected-pc-display').textContent = `PC ${pcNum}`;
    }

    function toggleButtons(i, state) {
      document.getElementById(`startBtn${i}`).style.display = state === 'initial' ? 'inline-block' : 'none';
      document.getElementById(`pauseBtn${i}`).style.display = state === 'started' ? 'inline-block' : 'none';
      document.getElementById(`resumeBtn${i}`).style.display = state === 'paused' ? 'inline-block' : 'none';
      document.getElementById(`resetBtn${i}`).style.display = state !== 'initial' ? 'inline-block' : 'none';
    }

    function updateDisplay(i, elapsed) {
      document.getElementById(`time${i}`).textContent = format(elapsed);
      const hours = elapsed / (1000 * 60 * 60);
      const gameCost = Math.floor(hours * pricePerHour);
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      const foodCost = stored?.foodTotal || 0;
      const totalCost = gameCost + foodCost;
      document.getElementById(`cost${i}`).textContent = `ğŸ® ${gameCost} + ğŸ” ${foodCost} = ğŸ’° ${totalCost} Ø¯ÛŒÙ†Ø§Ø±`;
    }

    function checkAndApplyFoodHighlight(pcNum) {
        const stored = JSON.parse(localStorage.getItem(`player${pcNum}`));
        const playerBox = document.getElementById(`playerBox${pcNum}`);
        if (stored && stored.foodTotal > 0) {
            playerBox.classList.add('has-food');
        } else {
            playerBox.classList.remove('has-food');
        }
    }

    function loadPlayer(i, container = playersDiv) {
      const playerKey = `player${i}`;
      const div = document.createElement('div');
      div.className = 'player';
      div.id = `playerBox${i}`;
      div.innerHTML = `
        <h4 id="playerName${i}">PC ${i}</h4>
        <input type="text" id="nameInput${i}" class="name-input" placeholder="Ù†Ø§ÙˆÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù†" />
        <div class="time" id="time${i}">00:00:00</div>
        <div class="cost" id="cost${i}">ğŸ’° 0 Ø¯ÛŒÙ†Ø§Ø±</div>
        <div class="buttons-wrapper">
            <button id="startBtn${i}" class="start-btn">Start</button>
            <button id="pauseBtn${i}" class="pause-btn" style="display:none;">Pause</button>
            <button id="resumeBtn${i}" class="resume-btn" style="display:none;">Resume</button>
            <button id="resetBtn${i}" class="reset-btn" style="display:none;">Reset</button>
        </div>
      `;
      container.appendChild(div);

      div.addEventListener('click', (e) => {
          if (e.target.tagName !== 'BUTTON' && e.target.tagName !== 'INPUT') {
            selectPC(i);
          }
      });

      const nameInput = document.getElementById(`nameInput${i}`);
      const playerName = document.getElementById(`playerName${i}`);
      let stored = JSON.parse(localStorage.getItem(playerKey));

      if (stored && stored.name) { nameInput.value = stored.name; playerName.textContent = stored.name; }

      if (!stored) {
        toggleButtons(i, 'initial');
         updateDisplay(i, 0); 
      } else {
        let currentElapsedTime = stored.isRunning ? (stored.elapsedTime + (Date.now() - stored.startTime)) : stored.elapsedTime;
        updateDisplay(i, currentElapsedTime);

        if(stored.isRunning){
            startTimer(i); toggleButtons(i, 'started'); div.classList.add("started");
        } else if (stored.elapsedTime > 0) {
            toggleButtons(i, 'paused'); div.classList.add("paused");
        } else {
            toggleButtons(i, 'initial');
        }
      }

      checkAndApplyFoodHighlight(i);

      nameInput.addEventListener('input', () => {
        let data = JSON.parse(localStorage.getItem(playerKey)) || {};
        data.name = nameInput.value;
        localStorage.setItem(playerKey, JSON.stringify(data));
        playerName.textContent = nameInput.value || `PC ${i}`;
      });

      document.getElementById(`startBtn${i}`).onclick = () => { startTimer(i); toggleButtons(i, 'started'); div.classList.add("started"); div.classList.remove("paused"); updateCounts(); };
      document.getElementById(`pauseBtn${i}`).onclick = () => { pauseTimer(i); toggleButtons(i, 'paused'); div.classList.add("paused"); div.classList.remove("started"); updateCounts(); };
      document.getElementById(`resumeBtn${i}`).onclick = () => { resumeTimer(i); toggleButtons(i, 'started'); div.classList.add("started"); div.classList.remove("paused"); updateCounts(); };
      document.getElementById(`resetBtn${i}`).onclick = () => { resetTimer(i); };
    }

    function startTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey)) || { elapsedTime: 0, startTime: 0, isRunning: false, foodTotal: 0, foodItems: [] };
      if (!stored.isRunning) {
        stored.startTime = Date.now();
        if(!stored.elapsedTime) stored.elapsedTime = 0;
        stored.isRunning = true;
        localStorage.setItem(playerKey, JSON.stringify(stored));
      }
      if (intervals[i]) clearInterval(intervals[i]);
      intervals[i] = setInterval(() => {
        let data = JSON.parse(localStorage.getItem(playerKey));
        if (!data || !data.isRunning) return clearInterval(intervals[i]);
        const elapsed = data.elapsedTime + (Date.now() - data.startTime);
        updateDisplay(i, elapsed);
      }, 1000);
    }

    function pauseTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      if (!stored || !stored.isRunning) return;
      stored.elapsedTime += Date.now() - stored.startTime;
      stored.isRunning = false;
      stored.startTime = 0;
      localStorage.setItem(playerKey, JSON.stringify(stored));
      if (intervals[i]) clearInterval(intervals[i]);
      updateDisplay(i, stored.elapsedTime);
    }

    function resumeTimer(i) { startTimer(i); }

    function resetTimer(i) {
      const playerKey = `player${i}`;
      localStorage.removeItem(playerKey);
      if (intervals[i]) clearInterval(intervals[i]);
      
      const div = document.getElementById(`playerBox${i}`);
      toggleButtons(i, 'initial'); 
      div.classList.remove("started", "paused", "has-food");
      
      document.getElementById(`time${i}`).textContent = "00:00:00";
      document.getElementById(`cost${i}`).textContent = "ğŸ’° 0 Ø¯ÛŒÙ†Ø§Ø±";
      document.getElementById(`nameInput${i}`).value = "";
      document.getElementById(`playerName${i}`).textContent = `PC ${i}`;

      if (selectedPC === i) {
          selectedPC = null;
          document.getElementById('selected-pc-display').textContent = 'Ù‡ÛŒÚ†';
          div.classList.remove('selected');
      }
      updateCounts();
    }

    function updateCounts() {
      let started = 0, notStarted = 0;
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`));
        (data?.isRunning) ? started++ : notStarted++;
      }
      document.getElementById('countStarted').textContent = started;
      document.getElementById('countNotStarted').textContent = notStarted;
    }

    function pauseAll() { for (let i = 1; i <= numPlayers; i++) { if (JSON.parse(localStorage.getItem(`player${i}`))?.isRunning) { pauseTimer(i); toggleButtons(i, 'paused'); document.getElementById(`playerBox${i}`).classList.add("paused"); document.getElementById(`playerBox${i}`).classList.remove("started"); } } updateCounts(); }
    function startAll() { for (let i = 1; i <= numPlayers; i++) { if (!JSON.parse(localStorage.getItem(`player${i}`))?.isRunning) { startTimer(i); toggleButtons(i, 'started'); document.getElementById(`playerBox${i}`).classList.add("started"); document.getElementById(`playerBox${i}`).classList.remove("paused"); } } updateCounts(); }

    function resetAll() { if (confirm("Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ù‡Û•Ù…ÙˆÙˆ ØªØ§ÛŒÙ…Û•Ø±Û•Ú©Ø§Ù† Ú•ÛŒØ³ØªØ§Ø±Øª Ø¨Ú©Û•ÛŒØªØŸ")) { for (let i = 1; i <= numPlayers; i++) { resetTimer(i); } updateCounts(); if (selectedPC) { document.getElementById(`playerBox${selectedPC}`).classList.remove('selected'); selectedPC = null; document.getElementById('selected-pc-display').textContent = 'Ù‡ÛŒÚ†'; } } }
    
    function addFoodToBill(pcNum, name, price) {
        const playerKey = `player${pcNum}`;
        let stored = JSON.parse(localStorage.getItem(playerKey)) || { elapsedTime: 0, startTime: 0, isRunning: false, foodTotal: 0, foodItems: [] };
        stored.foodTotal = (stored.foodTotal || 0) + price;
        stored.foodItems = stored.foodItems || [];
        stored.foodItems.push({ name: name, price: price });
        localStorage.setItem(playerKey, JSON.stringify(stored));
        
        const currentElapsedTime = stored.isRunning ? (stored.elapsedTime + (Date.now() - stored.startTime)) : stored.elapsedTime;
        updateDisplay(pcNum, currentElapsedTime);
        checkAndApplyFoodHighlight(pcNum);
    }
    
    function quickAdd(name, price) {
        const pcNum = selectedPC;
        if (!pcNum) { alert("ØªÚ©Ø§ÛŒÛ• Ø³Û•Ø±Û•ØªØ§ Ú©Ù„ÛŒÚ© Ù„Û•Ø³Û•Ø± ÛŒÛ•Ú©ÛÚ© Ù„Û• ØªØ§ÛŒÙ…Û•Ø±Û•Ú©Ø§Ù† Ø¨Ú©Û• Ø¨Û† Ù‡Û•ÚµØ¨Ú˜Ø§Ø±Ø¯Ù†ÛŒ!"); return; }
        addFoodToBill(pcNum, name, price);
    }
    
    function toggleManageFood() {
        const section = document.getElementById('manage-food-section');
        section.style.display = (section.style.display === 'none') ? 'block' : 'none';
    }

    function getQuickFoods() { return JSON.parse(localStorage.getItem('quickFoods')) || []; }
    function saveQuickFoods(foods) { localStorage.setItem('quickFoods', JSON.stringify(foods)); }

    function loadQuickFoodButtons() {
        const foods = getQuickFoods();
        const container = document.getElementById('quick-food-buttons');
        const manageList = document.getElementById('manage-food-list');
        container.innerHTML = '';
        manageList.innerHTML = '';

        foods.forEach((food, index) => {
            const displayName = food.name ? `${food.name} (${food.price})` : `${food.price}`;
            container.innerHTML += `<button class="global-btn" style="background-color: #e67e22;" onclick="quickAdd('${food.name || ''}', ${food.price})">${displayName}</button>`;
            manageList.innerHTML += `<div><span>${displayName}</span><button style="background:#c0392b; padding: 2px 8px; font-size: 12px;" onclick="deleteQuickFoodButton(${index})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button></div>`;
        });
    }

    function addQuickFoodButton() {
        const nameInput = document.getElementById('newFoodName');
        const priceInput = document.getElementById('newFoodPrice');
        const price = parseInt(priceInput.value);

        if (!price || isNaN(price)) { alert("ØªÚ©Ø§ÛŒÛ• Ù†Ø±Ø®ÛÚ©ÛŒ Ø¯Ø±ÙˆØ³Øª Ø¨Ù†ÙˆÙˆØ³Û•."); return; }
        
        const foods = getQuickFoods();
        foods.push({ name: nameInput.value.trim(), price: price });
        saveQuickFoods(foods);
        loadQuickFoodButtons();

        nameInput.value = '';
        priceInput.value = '';
    }

    function deleteQuickFoodButton(index) {
        if (!confirm("Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ø¯ÙˆÚ¯Ù…Û•ÛŒÛ• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ")) return;
        const foods = getQuickFoods();
        foods.splice(index, 1);
        saveQuickFoods(foods);
        loadQuickFoodButtons();
    }

    function showFoodList() {
      const pcNum = selectedPC;
      if (!pcNum) { alert("ØªÚ©Ø§ÛŒÛ• Ø³Û•Ø±Û•ØªØ§ PCÛŒÛ•Ú© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!"); return; }
      const stored = JSON.parse(localStorage.getItem(`player${pcNum}`));
      const items = stored?.foodItems || [];
      const list = items.length > 0 ? items.map(item => `ğŸ” ${item.name || 'Ø®ÙˆØ§Ø±Ø¯Ù†'} - ${item.price} Ø¯ÛŒÙ†Ø§Ø±`).join('\n') : `Ù‡ÛŒÚ† Ø®ÙˆØ§Ø±Ø¯Ù†ÛÚ© Ø¨Û† PC ${pcNum} Ø²ÛŒØ§Ø¯ Ù†Û•Ú©Ø±Ø§ÙˆÛ•.`;
      alert(`ğŸ“‹ Ù„ÛŒØ³ØªÛŒ Ø®ÙˆØ§Ø±Ø¯Ù†Û•Ú©Ø§Ù† Ø¨Û† PC ${pcNum}:\n\n${list}`);
    }

    function showSpecialTimers() {
        if (specialTimersLoaded) { alert("ØªØ§ÛŒÙ…Û•Ø±Û• ØªØ§ÛŒØ¨Û•ØªÛ•Ú©Ø§Ù† Ù¾ÛØ´ØªØ± Ø²ÛŒØ§Ø¯Ú©Ø±Ø§ÙˆÙ†."); return; }
        const password = prompt("Ø¨Û† Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¦Û•Ù… Ø¨Û•Ø´Û•ØŒ ØªÚ©Ø§ÛŒÛ• Ù¾Ø§Ø³Û†Ø±Ø¯Û•Ú©Û• Ø¨Ù†ÙˆÙˆØ³Û•:");
        if (password === "11") { 
            document.getElementById('special-timers-section').style.display = 'block';
            const newTotal = 40 + 10;
            for (let i = 41; i <= newTotal; i++) { loadPlayer(i, document.getElementById('special-players')); }
            numPlayers = newTotal; 
            specialTimersLoaded = true;
            updateCounts();
            alert("Ù¡Ù  ØªØ§ÛŒÙ…Û•Ø±ÛŒ ØªØ§ÛŒØ¨Û•Øª Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ú©Ø±Ø§ÛŒÛ•ÙˆÛ•!");
        } else if (password != null && password !== "") { 
            alert("Ù¾Ø§Ø³Û†Ø±Ø¯ Ù‡Û•ÚµÛ•ÛŒÛ•. ØªÚ©Ø§ÛŒÛ• Ø¯ÙˆÙˆØ¨Ø§Ø±Û• Ù‡Û•ÙˆÚµØ¨Ø¯Û•ÙˆÛ•.");
        }
    }

    // Initial Load
    for (let i = 1; i <= 40; i++) { loadPlayer(i); }
    updateCounts();
    loadQuickFoodButtons();

  </script>
</body>
</html>
