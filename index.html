<!DOCTYPE html>
<html>
<head>
  <title>Game Center Timers</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #111111;
      color: #eee;
      padding: 20px;
    }
    .main-title {
      text-align: center;
      font-size: 48px;
      font-weight: bold;
      color: #c63636;
      text-shadow: 0 0 10px #000000, 0 0 20px #250000;
      margin-bottom: 10px;
    }
    .global-btn {
      border: none;
      border-radius: 8px;
      padding: 8px 18px;
      color: white;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
      transition: background 0.3s ease;
    }
    .global-btn:hover {
      opacity: 0.85;
    }
    #players, #special-players {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 15px;
    }
    .player {
      background: #032648;
      border-radius: 12px;
      padding: 15px;
      border: 6px solid rgb(8, 81, 146);
      box-shadow: 0 4px 12px rgba(255, 76, 76, 0.1);
      text-align: center;
      transition: 0.3s ease;
    }
    .player.started {
      border: 6px solid rgb(6, 96, 6);
      background-color: #002005;
    }
    .player.paused {
      border: 6px solid rgb(99, 8, 8);
      background-color: rgb(44, 2, 2);
    }
    .player h4 {
      margin-top: 0;
      margin-bottom: 4px;
      font-size: 1.8em;
      color: #408df7;
    }
    .player.started h4 { color: #0fa514; }
    .player.paused h4 { color: #a72929; }
    .time {
      font-size: 24px;
      margin: 8px 0;
    }
    .time.running { color: #00ff00; }
    .time.paused { color: #ff3333; }
    .cost {
      font-size: 20px;
      color: #ffd700;
      margin-bottom: 10px;
    }
    button {
      border: none;
      border-radius: 8px;
      padding: 8px 18px;
      font-size: 14px;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      margin: 4px;
      transition: background 0.2s ease;
    }
    .start-btn { background-color: #4CAF50; }
    .pause-btn { background-color: #ff4c4c; }
    .resume-btn { background-color: #4CAF50; }
    .reset-btn { background-color: #ff6600; }
    table {
      width: 300px;
      margin: 20px auto;
      border-collapse: collapse;
      color: #eee;
    }
    table, th, td {
      border: 1px solid #555;
    }
    th, td {
      padding: 8px 12px;
      text-align: center;
    }
    th {
      background-color: #444;
    }
    #players input.name-input, #special-players input.name-input {
      width: 90%;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #888;
      font-size: 1em;
      background: #222;
      color: #eee;
      margin-top: 0;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>

  <h2 class="main-title">ğŸ® Sahollaka Game Center</h2>

  <!-- â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ø±Û•ÛŒ Ø®ÙˆØ§Ø±Ø¯Ù† -->
  <div style="margin-bottom: 30px; text-align:center;">
    <h3 style="color:#ffd700;">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ø±Û•ÛŒ Ø®ÙˆØ§Ø±Ø¯Ù†</h3>
    <select id="foodTargetSelect" style="padding:6px 10px; border-radius:8px;">
      <option disabled selected>PC ÛŒÛ•Ú© Ù‡Û•Ù„Ø¨Ú˜ÛØ±Û•</option>
      <!-- Options will be populated by JavaScript -->
    </select>
    <input type="text" id="foodNameInput" placeholder="Ù†Ø§ÙˆÛŒ Ø®ÙˆØ§Ø±Ø¯Ù†" style="padding:6px 10px; border-radius:8px; margin-left:8px;" />
    <input type="number" id="foodPriceInput" placeholder="Ù†Ø±Ø®ÛŒ Ø¯ÛŒÙ†Ø§Ø±" style="padding:6px 10px; border-radius:8px; margin-left:8px; width:100px;" />
    <button onclick="addFood()" style="background:#ffb300;" class="global-btn">â• Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•</button>
    <button onclick="showFoodList()" style="background:#0088cc;" class="global-btn">ğŸ” Ø®ÙˆØ§Ø±Ø¯Ù†Û•Ú©Ø§Ù†</button>
  </div>

  <!-- Global Controls -->
  <div style="text-align:center; margin-bottom: 30px;">
    <button onclick="pauseAll()" style="background:#ff4c4c;" class="global-btn">â¸ï¸ Pause All</button>
    <button onclick="startAll()" style="background:#4CAF50;" class="global-btn">â–¶ï¸ Start All</button>
    <button onclick="resetAll()" style="background:#ff6600;" class="global-btn">ğŸ”„ Reset All</button>
    <button onclick="showSpecialTimers()" style="background:#9b59b6;" class="global-btn">10 pc</button>
  </div>

  <table>
    <thead>
      <tr>
        <th style="color: #4CAF50;">(Started)</th>
        <th style="color: #ff4c4c;">(Not Started)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="countStarted">0</td>
        <td id="countNotStarted">0</td>
      </tr>
    </tbody>
  </table>

  <div id="players"></div>

  <!-- New Section for Special Timers (Initially Hidden) -->
  <div id="special-timers-section" style="display:none;">
    <hr style="margin: 30px auto; border-color: #555; width: 80%;">
    <h2 class="main-title" style="font-size: 32px; color: #9b59b6;">ğŸ” Private Timers</h2>
    <div id="special-players"></div>
  </div>

  <script>
    let numPlayers = 40; // Changed to let to allow modification
    const playersDiv = document.getElementById('players');
    const pricePerHour = 3000;
    let intervals = {};
    let specialTimersLoaded = false;

    function format(ms) {
      const totalSeconds = Math.floor(ms / 1000);
      const h = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
      const m = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const s = String(totalSeconds % 60).padStart(2, '0');
      return `${h}:${m}:${s}`;
    }

    function toggleButtons(i, state) {
      document.getElementById(`startBtn${i}`).style.display = state === 'initial' ? 'inline-block' : 'none';
      document.getElementById(`pauseBtn${i}`).style.display = state === 'started' ? 'inline-block' : 'none';
      document.getElementById(`resumeBtn${i}`).style.display = state === 'paused' ? 'inline-block' : 'none';
      document.getElementById(`resetBtn${i}`).style.display = state !== 'initial' ? 'inline-block' : 'none';
    }

    function updateDisplay(i, elapsed) {
      document.getElementById(`time${i}`).textContent = format(elapsed);
      const hours = elapsed / (1000 * 60 * 60);
      const gameCost = Math.floor(hours * pricePerHour);
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      const foodCost = stored?.foodTotal || 0;
      const totalCost = gameCost + foodCost;
      document.getElementById(`cost${i}`).textContent = `ğŸ® ${gameCost} + ğŸ” ${foodCost} = ğŸ’° ${totalCost} Ø¯ÛŒÙ†Ø§Ø±`;
    }

    function loadPlayer(i, container = playersDiv) {
      const playerKey = `player${i}`;
      const div = document.createElement('div');
      div.className = 'player';
      div.id = `playerBox${i}`;
      div.innerHTML = `
        <h4 id="playerName${i}">PC ${i}</h4>
        <input type="text" id="nameInput${i}" class="name-input" placeholder="Ù†Ø§ÙˆÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù†" />
        <div class="time" id="time${i}">00:00:00</div>
        <div class="cost" id="cost${i}">ğŸ’° 0 Ø¯ÛŒÙ†Ø§Ø±</div>
        <button id="startBtn${i}" class="start-btn">Start</button>
        <button id="pauseBtn${i}" class="pause-btn" style="display:none;">Pause</button>
        <button id="resumeBtn${i}" class="resume-btn" style="display:none;">Resume</button>
        <button id="resetBtn${i}" class="reset-btn" style="display:none;">Reset</button>
      `;
      container.appendChild(div);

      const nameInput = document.getElementById(`nameInput${i}`);
      const playerName = document.getElementById(`playerName${i}`);
      let stored = JSON.parse(localStorage.getItem(playerKey));

      if (stored && stored.name) {
        nameInput.value = stored.name;
        playerName.textContent = stored.name;
      }

      if (!stored) {
        toggleButtons(i, 'initial');
      } else {
        if (stored.isRunning) {
          startTimer(i);
          toggleButtons(i, 'started');
          div.classList.add("started");
        } else if (stored.elapsedTime > 0) {
          updateDisplay(i, stored.elapsedTime);
          toggleButtons(i, 'paused');
          div.classList.add("paused");
        }
      }

      nameInput.addEventListener('input', () => {
        let data = JSON.parse(localStorage.getItem(playerKey)) || {};
        data.name = nameInput.value;
        localStorage.setItem(playerKey, JSON.stringify(data));
        playerName.textContent = nameInput.value || `PC ${i}`;
      });

      document.getElementById(`startBtn${i}`).onclick = () => {
        startTimer(i); toggleButtons(i, 'started');
        div.classList.add("started"); div.classList.remove("paused");
        updateCounts();
      };
      document.getElementById(`pauseBtn${i}`).onclick = () => {
        pauseTimer(i); toggleButtons(i, 'paused');
        div.classList.add("paused"); div.classList.remove("started");
        updateCounts();
      };
      document.getElementById(`resumeBtn${i}`).onclick = () => {
        resumeTimer(i); toggleButtons(i, 'started');
        div.classList.add("started"); div.classList.remove("paused");
        updateCounts();
      };
      document.getElementById(`resetBtn${i}`).onclick = () => {
        resetTimer(i); toggleButtons(i, 'initial');
        div.classList.remove("started", "paused");
        updateCounts();
      };
    }

    function startTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey)) || { elapsedTime: 0, startTime: 0, isRunning: false };
      if (!stored.isRunning) {
        stored.startTime = Date.now();
        stored.isRunning = true;
        localStorage.setItem(playerKey, JSON.stringify(stored));
      }
      if (intervals[i]) clearInterval(intervals[i]);
      intervals[i] = setInterval(() => {
        let data = JSON.parse(localStorage.getItem(playerKey));
        if (!data || !data.isRunning) return clearInterval(intervals[i]);
        const elapsed = data.elapsedTime + (Date.now() - data.startTime);
        updateDisplay(i, elapsed);
      }, 1000);
    }

    function pauseTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      if (!stored || !stored.isRunning) return;
      stored.elapsedTime += Date.now() - stored.startTime;
      stored.isRunning = false;
      stored.startTime = 0;
      localStorage.setItem(playerKey, JSON.stringify(stored));
      if (intervals[i]) clearInterval(intervals[i]);
      updateDisplay(i, stored.elapsedTime);
    }

    function resumeTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      if (!stored) return;
      stored.startTime = Date.now();
      stored.isRunning = true;
      localStorage.setItem(playerKey, JSON.stringify(stored));
      if (intervals[i]) clearInterval(intervals[i]);
      intervals[i] = setInterval(() => {
        let data = JSON.parse(localStorage.getItem(playerKey));
        if (!data || !data.isRunning) return clearInterval(intervals[i]);
        const elapsed = data.elapsedTime + (Date.now() - data.startTime);
        updateDisplay(i, elapsed);
      }, 1000);
    }

    function resetTimer(i) {
      const playerKey = `player${i}`;
      localStorage.removeItem(playerKey);
      if (intervals[i]) clearInterval(intervals[i]);
      document.getElementById(`time${i}`).textContent = "00:00:00";
      document.getElementById(`cost${i}`).textContent = "ğŸ’° 0 Ø¯ÛŒÙ†Ø§Ø±";
      document.getElementById(`nameInput${i}`).value = "";
      document.getElementById(`playerName${i}`).textContent = `PC ${i}`;
    }

    function updateCounts() {
      let started = 0, notStarted = 0;
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`));
        if (data?.isRunning) started++;
        else notStarted++;
      }
      document.getElementById('countStarted').textContent = started;
      document.getElementById('countNotStarted').textContent = notStarted;
    }

    function pauseAll() {
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`));
        if (data?.isRunning) {
          pauseTimer(i);
          toggleButtons(i, 'paused');
          document.getElementById(`playerBox${i}`).classList.remove("started");
          document.getElementById(`playerBox${i}`).classList.add("paused");
        }
      }
      updateCounts();
    }

    function startAll() {
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`)) || {};
        if (!data.isRunning) {
          startTimer(i);
          toggleButtons(i, 'started');
          document.getElementById(`playerBox${i}`).classList.add("started");
          document.getElementById(`playerBox${i}`).classList.remove("paused");
        }
      }
      updateCounts();
    }

    function resetAll() {
      if (confirm("Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ù‡Û•Ù…ÙˆÙˆ ØªØ§ÛŒÙ…Û•Ø±Û•Ú©Ø§Ù† Ú•ÛŒØ³ØªØ§Ø±Øª Ø¨Ú©Û•ÛŒØªØŸ")) {
        for (let i = 1; i <= numPlayers; i++) {
          resetTimer(i);
          toggleButtons(i, 'initial');
          document.getElementById(`playerBox${i}`).classList.remove("started", "paused");
        }
        updateCounts();
      }
    }

    function populateDropdown() {
        const select = document.getElementById('foodTargetSelect');
        const currentVal = select.value;
        select.innerHTML = '<option disabled selected>PC ÛŒÛ•Ú© Ù‡Û•Ù„Ø¨Ú˜ÛØ±Û•</option>';
        for (let i = 1; i <= numPlayers; i++) {
            select.innerHTML += `<option value="${i}">PC ${i}</option>`;
        }
        if (currentVal) select.value = currentVal;
    }

    function addFood() {
      const pcNum = document.getElementById('foodTargetSelect').value;
      const foodName = document.getElementById('foodNameInput').value.trim();
      const foodPrice = parseInt(document.getElementById('foodPriceInput').value.trim());
      if (!pcNum || !foodName || isNaN(foodPrice)) {
        alert("ØªÚ©Ø§ÛŒÛ• Ù‡Û•Ù…ÙˆÙˆ Ø®Ø§Ù†Û•Ú©Ø§Ù† Ù¾Ú•Ø¨Ú©Û•ÙˆÛ•.");
        return;
      }
      const playerKey = `player${pcNum}`;
      let stored = JSON.parse(localStorage.getItem(playerKey)) || { elapsedTime: 0, startTime: 0, isRunning: false, foodTotal: 0, foodItems: [] };
      stored.foodTotal = (stored.foodTotal || 0) + foodPrice;
      stored.foodItems = stored.foodItems || [];
      stored.foodItems.push({ name: foodName, price: foodPrice });
      localStorage.setItem(playerKey, JSON.stringify(stored));
      updateDisplay(pcNum, stored.elapsedTime > 0 ? stored.elapsedTime : 0);
      document.getElementById('foodNameInput').value = '';
      document.getElementById('foodPriceInput').value = '';
      document.getElementById('foodTargetSelect').selectedIndex = 0;
    }

    function showFoodList() {
      const pcNum = document.getElementById('foodTargetSelect').value;
      if (!pcNum || pcNum === "PC ÛŒÛ•Ú© Ù‡Û•Ù„Ø¨Ú˜ÛØ±Û•") {
        alert("ØªÚ©Ø§ÛŒÛ• ÛŒÛ•Ú©ÛÚ© Ù„Û• Ù¾Û•ÛŒØ³ÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù† Ù‡Û•Ù„Ø¨Ú˜ÛØ±Û•.");
        return;
      }
      const playerKey = `player${pcNum}`;
      const stored = JSON.parse(localStorage.getItem(playerKey));
      const items = stored?.foodItems || [];
      if (items.length === 0) {
        alert(`Ù‡ÛŒÚ† Ø®ÙˆØ§Ø±Ø¯Ù†ÛÚ© Ø¨Û† PC ${pcNum} Ø²ÛŒØ§Ø¯ Ù†Û•Ú©Ø±Ø§ÙˆÛ•.`);
      } else {
        const list = items.map(item => `ğŸ” ${item.name} - ${item.price} Ø¯ÛŒÙ†Ø§Ø±`).join('\n');
        alert(`ğŸ“‹ Ù„ÛŒØ³ØªÛŒ Ø®ÙˆØ§Ø±Ø¯Ù†Û•Ú©Ø§Ù† Ø¨Û† PC ${pcNum}:\n\n${list}`);
      }
    }

    function showSpecialTimers() {
        if (specialTimersLoaded) {
            alert("ØªØ§ÛŒÙ…Û•Ø±Û• ØªØ§ÛŒØ¨Û•ØªÛ•Ú©Ø§Ù† Ù¾ÛØ´ØªØ± Ø²ÛŒØ§Ø¯Ú©Ø±Ø§ÙˆÙ†.");
            return;
        }

        const password = prompt("Ø¨Û† Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¦Û•Ù… Ø¨Û•Ø´Û•ØŒ ØªÚ©Ø§ÛŒÛ• Ù¾Ø§Ø³Û†Ø±Ø¯Û•Ú©Û• Ø¨Ù†ÙˆÙˆØ³Û•:");
        if (password === "11") { // The secret password
            document.getElementById('special-timers-section').style.display = 'block';
            const specialPlayersContainer = document.getElementById('special-players');

            const newTotal = 40 + 10;
            for (let i = 41; i <= newTotal; i++) {
                loadPlayer(i, specialPlayersContainer);
            }
            
            numPlayers = newTotal; // Update the total count
            specialTimersLoaded = true;
            
            populateDropdown(); // Update the dropdown to include new PCs
            updateCounts();
            alert("Ù¡Ù  ØªØ§ÛŒÙ…Û•Ø±ÛŒ ØªØ§ÛŒØ¨Û•Øª Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ú©Ø±Ø§ÛŒÛ•ÙˆÛ•!");
        } else if (password != null && password !== "") { 
            alert("Ù¾Ø§Ø³Û†Ø±Ø¯ Ù‡Û•ÚµÛ•ÛŒÛ•. ØªÚ©Ø§ÛŒÛ• Ø¯ÙˆÙˆØ¨Ø§Ø±Û• Ù‡Û•ÙˆÚµØ¨Ø¯Û•ÙˆÛ•.");
        }
    }

    // Initial Load
    for (let i = 1; i <= 40; i++) {
      loadPlayer(i);
    }
    populateDropdown();
    updateCounts();

  </script>
</body>
</html>
