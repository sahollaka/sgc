<!DOCTYPE html>
<html>
<head>
  <title>Game Center Timers</title>
  <style>
 body {
  font-family: 'Segoe UI', sans-serif;
  background-color: #111;
  color: #eee;
  padding: 20px;
}

.main-title {
  text-align: center;
  font-size: 48px;
  font-weight: bold;
  color: #c63636;
  text-shadow: 0 0 10px #000000, 0 0 20px #250000;
  margin-bottom: 10px;
}

.global-btn {
  border: none;
  border-radius: 8px;
  padding: 8px 18px;
  color: white;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  margin: 5px;
  transition: background 0.3s ease;
}

.global-btn:hover {
  opacity: 0.85;
}

#players {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 15px;
}

.player {
  background: #032648;
  border-radius: 12px;
  padding: 15px;
  border: 6px solid rgb(8, 81, 146);
  box-shadow: 0 4px 12px rgba(255, 76, 76, 0.1);
  text-align: center;
  transition: 0.3s ease;
}

.player.started {
  border: 6px solid rgb(6, 96, 6);
  background-color: #002005;
  
}

.player.paused {
  border: 6px solid rgb(99, 8, 8);
  background-color: rgb(44, 2, 2);
}

.player h4 {
  margin-top: 0;
  margin-bottom: 4px;
  font-size: 1.8em;
  color: #408df7;
}

.player.started h4 { color: #0fa514; }
.player.paused h4 { color: #a72929; }

.time {
  font-size: 24px;
  margin: 8px 0;
}

.time.running { color: #00ff00; }
.time.paused { color: #ff3333; }

.cost {
  font-size: 20px;
  color: #ffd700;
  margin-bottom: 10px;
}

button {
  border: none;
  border-radius: 8px;
  padding: 8px 18px;
  font-size: 14px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  margin: 4px;
  transition: background 0.2s ease;
}

.start-btn { background-color: #4CAF50; }
.pause-btn { background-color: #ff4c4c; }
.resume-btn { background-color: #4CAF50; }
.reset-btn { background-color: #ff6600; }

table {
  width: 300px;
  margin: 20px auto;
  border-collapse: collapse;
  color: #eee;
}

table, th, td {
  border: 1px solid #555;
}

th, td {
  padding: 8px 12px;
  text-align: center;
}

th {
  background-color: #444;
}

#players input.name-input {
  width: 90%;
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid #888;
  font-size: 1em;
  background: #222;
  color: #eee;
  margin-top: 0;
  margin-bottom: 12px;
}

  </style>
</head>
<body>

  <h2 class="main-title">🎮 Sahollaka Game Center</h2>

  <!-- ➕ زیادکردنی پارەی خواردن -->
  <div style="margin-bottom: 30px; text-align:center;">
    <h3 style="color:#ffd700;">➕ زیادکردنی پارەی خواردن</h3>
    <select id="foodTargetSelect" style="padding:6px 10px; border-radius:8px;">
      <option disabled selected>PC یەک هەلبژێرە</option>
      <script>
        for (let i = 1; i <= 40; i++) {
          document.write(`<option value="${i}">PC ${i}</option>`);
        }
      </script>
    </select>
    <input type="text" id="foodNameInput" placeholder="ناوی خواردن" style="padding:6px 10px; border-radius:8px; margin-left:8px;" />
    <input type="number" id="foodPriceInput" placeholder="نرخی دینار" style="padding:6px 10px; border-radius:8px; margin-left:8px; width:100px;" />
    <button onclick="addFood()" style="background:#ffb300;" class="global-btn">➕ زیاد بکە</button>
    <button onclick="showFoodList()" style="background:#0088cc;" class="global-btn">🍔 خواردنەکان</button>
  </div>

  <!-- Global Controls -->
  <div style="text-align:center; margin-bottom: 30px;">
    <button onclick="pauseAll()" style="background:#ff4c4c;" class="global-btn">⏸️ Pause All</button>
    <button onclick="startAll()" style="background:#4CAF50;" class="global-btn">▶️ Start All</button>
    <button onclick="resetAll()" style="background:#ff6600;" class="global-btn">🔄 Reset All </button>
  </div>

  <table>
    <thead>
      <tr>
        <th style="color: #4CAF50;">(Started)</th>
        <th style="color: #ff4c4c;">(Not Started)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="countStarted">0</td>
        <td id="countNotStarted">0</td>
      </tr>
    </tbody>
  </table>

  <div id="players"></div>

  <script>
    const numPlayers = 40;
    const playersDiv = document.getElementById('players');
    const pricePerHour = 3000;
    let intervals = {};

    function format(ms) {
      const totalSeconds = Math.floor(ms / 1000);
      const h = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
      const m = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const s = String(totalSeconds % 60).padStart(2, '0');
      return `${h}:${m}:${s}`;
    }

    function toggleButtons(i, state) {
      document.getElementById(`startBtn${i}`).style.display = state === 'initial' ? 'inline-block' : 'none';
      document.getElementById(`pauseBtn${i}`).style.display = state === 'started' ? 'inline-block' : 'none';
      document.getElementById(`resumeBtn${i}`).style.display = state === 'paused' ? 'inline-block' : 'none';
      document.getElementById(`resetBtn${i}`).style.display = state !== 'initial' ? 'inline-block' : 'none';
    }

    function updateDisplay(i, elapsed) {
      document.getElementById(`time${i}`).textContent = format(elapsed);
      const hours = elapsed / (1000 * 60 * 60);
      const gameCost = Math.floor(hours * pricePerHour);

      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      const foodCost = stored?.foodTotal || 0;

      const totalCost = gameCost + foodCost;
      document.getElementById(`cost${i}`).textContent = `🎮 ${gameCost} + 🍔 ${foodCost} = 💰 ${totalCost} دینار`;
    }

    function loadPlayer(i) {
      const playerKey = `player${i}`;
      const div = document.createElement('div');
      div.className = 'player';
      div.id = `playerBox${i}`;
      div.innerHTML = `
        <h4 id="playerName${i}">PC ${i}</h4>
        <input type="text" id="nameInput${i}" class="name-input" placeholder="ناوی یاریزان" />
        <div class="time" id="time${i}">00:00:00</div>
        <div class="cost" id="cost${i}">💰 0 دینار</div>
        <button id="startBtn${i}" class="start-btn">Start</button>
        <button id="pauseBtn${i}" class="pause-btn" style="display:none;">Pause</button>
        <button id="resumeBtn${i}" class="resume-btn" style="display:none;">Resume</button>
        <button id="resetBtn${i}" class="reset-btn" style="display:none;">Reset</button>
      `;
      playersDiv.appendChild(div);

      const nameInput = document.getElementById(`nameInput${i}`);
      const playerName = document.getElementById(`playerName${i}`);
      let stored = JSON.parse(localStorage.getItem(playerKey));

      if (stored && stored.name) {
        nameInput.value = stored.name;
        playerName.textContent = stored.name;
      }

      if (!stored) {
        toggleButtons(i, 'initial');
      } else {
        if (stored.isRunning) {
          startTimer(i);
          toggleButtons(i, 'started');
          div.classList.add("started");
        } else if (stored.elapsedTime > 0) {
          updateDisplay(i, stored.elapsedTime);
          toggleButtons(i, 'paused');
          div.classList.add("paused");
        }
      }

      nameInput.addEventListener('input', () => {
        let data = JSON.parse(localStorage.getItem(playerKey)) || {};
        data.name = nameInput.value;
        localStorage.setItem(playerKey, JSON.stringify(data));
        playerName.textContent = nameInput.value || `PC ${i}`;
      });

      document.getElementById(`startBtn${i}`).onclick = () => {
        startTimer(i); toggleButtons(i, 'started');
        div.classList.add("started"); div.classList.remove("paused");
        updateCounts();
      };

      document.getElementById(`pauseBtn${i}`).onclick = () => {
        pauseTimer(i); toggleButtons(i, 'paused');
        div.classList.add("paused"); div.classList.remove("started");
        updateCounts();
      };

      document.getElementById(`resumeBtn${i}`).onclick = () => {
        resumeTimer(i); toggleButtons(i, 'started');
        div.classList.add("started"); div.classList.remove("paused");
        updateCounts();
      };

      document.getElementById(`resetBtn${i}`).onclick = () => {
        resetTimer(i); toggleButtons(i, 'initial');
        div.classList.remove("started", "paused");
        updateCounts();
      };
    }

    function startTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey)) || { elapsedTime: 0, startTime: 0, isRunning: false };
      if (!stored.isRunning) {
        stored.startTime = Date.now();
        stored.isRunning = true;
        localStorage.setItem(playerKey, JSON.stringify(stored));
      }
      if (intervals[i]) clearInterval(intervals[i]);
      intervals[i] = setInterval(() => {
        let data = JSON.parse(localStorage.getItem(playerKey));
        if (!data || !data.isRunning) return clearInterval(intervals[i]);
        const elapsed = data.elapsedTime + (Date.now() - data.startTime);
        updateDisplay(i, elapsed);
      }, 1000);
    }

    function pauseTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      if (!stored || !stored.isRunning) return;
      stored.elapsedTime += Date.now() - stored.startTime;
      stored.isRunning = false;
      stored.startTime = 0;
      localStorage.setItem(playerKey, JSON.stringify(stored));
      if (intervals[i]) clearInterval(intervals[i]);
      updateDisplay(i, stored.elapsedTime);
    }

    function resumeTimer(i) {
      const playerKey = `player${i}`;
      let stored = JSON.parse(localStorage.getItem(playerKey));
      if (!stored) return;
      stored.startTime = Date.now();
      stored.isRunning = true;
      localStorage.setItem(playerKey, JSON.stringify(stored));
      if (intervals[i]) clearInterval(intervals[i]);
      intervals[i] = setInterval(() => {
        let data = JSON.parse(localStorage.getItem(playerKey));
        if (!data || !data.isRunning) return clearInterval(intervals[i]);
        const elapsed = data.elapsedTime + (Date.now() - data.startTime);
        updateDisplay(i, elapsed);
      }, 1000);
    }

  function resetTimer(i) {
  const playerKey = `player${i}`;
  localStorage.removeItem(playerKey);
  if (intervals[i]) clearInterval(intervals[i]);

  // Reset UI
  document.getElementById(`time${i}`).textContent = "00:00:00";
  document.getElementById(`cost${i}`).textContent = "💰 0 دینار";
  document.getElementById(`nameInput${i}`).value = "";
  document.getElementById(`playerName${i}`).textContent = `PC ${i}`;
}

    function updateCounts() {
      let started = 0, notStarted = 0;
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`));
        if (data?.isRunning) started++;
        else notStarted++;
      }
      document.getElementById('countStarted').textContent = started;
      document.getElementById('countNotStarted').textContent = notStarted;
    }

    function pauseAll() {
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`));
        if (data?.isRunning) {
          pauseTimer(i);
          toggleButtons(i, 'paused');
          document.getElementById(`playerBox${i}`).classList.remove("started");
          document.getElementById(`playerBox${i}`).classList.add("paused");
        }
      }
      updateCounts();
    }

    function startAll() {
      for (let i = 1; i <= numPlayers; i++) {
        const data = JSON.parse(localStorage.getItem(`player${i}`)) || {};
        if (!data.isRunning) {
          startTimer(i);
          toggleButtons(i, 'started');
          document.getElementById(`playerBox${i}`).classList.add("started");
          document.getElementById(`playerBox${i}`).classList.remove("paused");
        }
      }
      updateCounts();
    }

    function resetAll() {
      if (confirm("دڵنیایت دەتەوێت هەموو تایمەرەکان ڕیستارت بکەیت؟")) {
        for (let i = 1; i <= numPlayers; i++) {
          resetTimer(i);
          toggleButtons(i, 'initial');
          document.getElementById(`playerBox${i}`).classList.remove("started", "paused");
        }
        updateCounts();
      }
    }

    function addFood() {
      const pcNum = document.getElementById('foodTargetSelect').value;
      const foodName = document.getElementById('foodNameInput').value.trim();
      const foodPrice = parseInt(document.getElementById('foodPriceInput').value.trim());

      if (!pcNum || !foodName || isNaN(foodPrice)) {
        alert("تکایە هەموو خانەکان پڕبکەوە.");
        return;
      }

      const playerKey = `player${pcNum}`;
      let stored = JSON.parse(localStorage.getItem(playerKey)) || { elapsedTime: 0, startTime: 0, isRunning: false, foodTotal: 0, foodItems: [] };
      stored.foodTotal = (stored.foodTotal || 0) + foodPrice;
      stored.foodItems = stored.foodItems || [];
      stored.foodItems.push({ name: foodName, price: foodPrice });
      localStorage.setItem(playerKey, JSON.stringify(stored));
      updateDisplay(pcNum, stored.elapsedTime);
      document.getElementById('foodNameInput').value = '';
      document.getElementById('foodPriceInput').value = '';
      document.getElementById('foodTargetSelect').selectedIndex = 0;
    }

    function showFoodList() {
      const pcNum = document.getElementById('foodTargetSelect').value;

      if (!pcNum || pcNum === "PC یەک هەلبژێرە") {
        alert("تکایە یەکێک لە پەیسی یاریزان هەلبژێرە.");
        return;
      }

      const playerKey = `player${pcNum}`;
      const stored = JSON.parse(localStorage.getItem(playerKey));
      const items = stored?.foodItems || [];

      if (items.length === 0) {
        alert(`هیچ خواردنێک بۆ PC ${pcNum} زیاد نەکراوە.`);
      } else {
        const list = items.map(item => `🍔 ${item.name} - ${item.price} دینار`).join('\n');
        alert(`📋 لیستی خواردنەکان بۆ PC ${pcNum}:\n\n${list}`);
      }
    }

    for (let i = 1; i <= numPlayers; i++) {
      loadPlayer(i);
    }

    updateCounts();
  </script>
</body>
</html>


